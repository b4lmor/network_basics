# SOCKS-прокси

Необходимо реализовать прокси-сервер, соответствующий стандарту SOCKS версии 5. В параметрах программы передаётся только порт, на котором прокси будет ждать входящих подключений от клиентов.

## Основные требования

- **Команды**: Из трёх доступных в протоколе команд обязательной является только реализация команды 1 (establish a TCP/IP stream connection).

- **Аутентификация**: Поддержка аутентификации и IPv6-адресов не требуется.

- **Неблокирующие сокеты**: Реализация прокси должна использовать неблокирующиеся сокеты, работая с ними в рамках одного треда. Использование дополнительных тредов не допускается, за исключением селектора.

## Предположения о протоколах

- Прокси не должна делать предположений о том, какой протокол уровня приложений будет использоваться внутри перенаправляемого TCP-соединения.
- Должна поддерживаться передача данных одновременно в обе стороны, а соединения должны закрываться аккуратно (только после того, как они больше не нужны).

## Производительность

- В приложении не должно быть холостых циклов ни в каких ситуациях. То есть не должно быть состояния программы, где неоднократно выполняется тело цикла без фактической передачи данных.
- Не допускается неограниченное расходование памяти для обслуживания одного клиента.
- Производительность работы через прокси не должна быть заметно хуже, чем без прокси. Можно использовать инструменты разработчика браузера на вкладке Network для отслеживания корректности и скорости работы.

## Резолвинг доменных имён

- Прокси должен поддерживать резолвинг доменных имён (значение `0x03` в поле адреса). Резолвинг также должен быть неблокирующимся.
- На старте программы создайте новый UDP-сокет и добавьте его в селектор на чтение.
- Когда необходимо отрезолвить доменное имя, отправляйте через этот сокет DNS-запрос A-записи на адрес рекурсивного DNS-резолвера.

## Использование библиотек

- Для получения адреса рекурсивного резолвера, а также для формирования и парсинга DNS-сообщений на Java предлагается использовать библиотеку [dnsjava](https://dnsjava.org/). Для других языков найдите аналогичные библиотеки.

## Тестирование

- Для тестирования можно настроить любой веб-браузер на использование вашего прокси и посещать любые веб-сайты, богатые контентом.

## Ссылки на протокол SOCKS

- [SOCKS 5 RFC](https://www.ietf.org/rfc/rfc1928.txt)
